{"id":"c9219119-960b-4e77-bfc6-d38e0cf15d00","revision":0,"last_node_id":109,"last_link_id":52,"nodes":[{"id":12,"type":"Reroute","pos":[894,-87],"size":[124,26],"flags":{},"order":12,"mode":0,"inputs":[{"name":"","type":"*","link":44}],"outputs":[{"name":"SUPIRMODEL","type":"SUPIRMODEL","slot_index":0,"links":[22,23]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":11,"type":"SUPIR_encode","pos":[690,21],"size":[217.8501434326172,126],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"SUPIR_VAE","name":"SUPIR_VAE","type":"SUPIRVAE","link":15},{"localized_name":"image","name":"image","type":"IMAGE","link":16},{"localized_name":"use_tiled_vae","name":"use_tiled_vae","type":"BOOLEAN","widget":{"name":"use_tiled_vae"},"link":null},{"localized_name":"encoder_tile_size","name":"encoder_tile_size","type":"INT","widget":{"name":"encoder_tile_size"},"link":null},{"localized_name":"encoder_dtype","name":"encoder_dtype","type":"COMBO","widget":{"name":"encoder_dtype"},"link":null}],"outputs":[{"localized_name":"latent","name":"latent","type":"LATENT","slot_index":0,"links":[17]}],"properties":{"cnr_id":"comfyui-supir","ver":"53fc4f82f139e0875e1f4f3716fbeafa073e4242","Node name for S&R":"SUPIR_encode"},"widgets_values":[true,512,"auto"]},{"id":3,"type":"PreviewImage","pos":[1722,60],"size":[985.1123046875,988.2251586914062],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":27}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":16,"type":"GetNode","pos":[2027,-130],"size":[210,58],"flags":{"collapsed":true},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[29]}],"title":"Get_InputImage","properties":{},"widgets_values":["InputImage"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":19,"type":"GetNode","pos":[1739,-142],"size":[210,58],"flags":{"collapsed":true},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"SUPIRVAE","type":"SUPIRVAE","links":[32]}],"title":"Get_SUPIRVAE","properties":{},"widgets_values":["SUPIRVAE"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":14,"type":"ColorMatch","pos":[2027,-81],"size":[315,102],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"image_ref","name":"image_ref","type":"IMAGE","link":29},{"localized_name":"image_target","name":"image_target","type":"IMAGE","link":26},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null},{"localized_name":"strength","name":"strength","shape":7,"type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","slot_index":0,"links":[27,34]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"8ecf5cd05e0a1012087b0da90eea9a13674668db","Node name for S&R":"ColorMatch"},"widgets_values":["mkl",1]},{"id":10,"type":"SUPIR_decode","pos":[1733,-90],"size":[258.0101318359375,102],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"SUPIR_VAE","name":"SUPIR_VAE","type":"SUPIRVAE","link":32},{"localized_name":"latents","name":"latents","type":"LATENT","link":12},{"localized_name":"use_tiled_vae","name":"use_tiled_vae","type":"BOOLEAN","widget":{"name":"use_tiled_vae"},"link":null},{"localized_name":"decoder_tile_size","name":"decoder_tile_size","type":"INT","widget":{"name":"decoder_tile_size"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","slot_index":0,"links":[26]}],"properties":{"cnr_id":"comfyui-supir","ver":"53fc4f82f139e0875e1f4f3716fbeafa073e4242","Node name for S&R":"SUPIR_decode"},"widgets_values":[true,768]},{"id":20,"type":"Image Comparer (rgthree)","pos":[737,379],"size":[647.1893310546875,642.7651977539062],"flags":{},"order":22,"mode":0,"inputs":[{"dir":3,"name":"image_a","type":"IMAGE","link":33},{"dir":3,"name":"image_b","type":"IMAGE","link":34}],"outputs":[],"properties":{"cnr_id":"rgthree-comfy","ver":"32142fe476878a354dda6e2d4b5ea98960de3ced","comparer_mode":"Slide"},"widgets_values":[[{"name":"A","selected":true,"url":"/api/view?filename=rgthree.compare._temp_vbcxu_00001_.png&type=temp&subfolder=&rand=0.6906047418713833"},{"name":"B","selected":true,"url":"/api/view?filename=rgthree.compare._temp_vbcxu_00002_.png&type=temp&subfolder=&rand=0.483806822315752"}]]},{"id":5,"type":"SUPIR_first_stage","pos":[376.9737548828125,20],"size":[287.20001220703125,170],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"SUPIR_VAE","name":"SUPIR_VAE","type":"SUPIRVAE","link":46},{"localized_name":"image","name":"image","type":"IMAGE","link":47},{"localized_name":"use_tiled_vae","name":"use_tiled_vae","type":"BOOLEAN","widget":{"name":"use_tiled_vae"},"link":null},{"localized_name":"encoder_tile_size","name":"encoder_tile_size","type":"INT","widget":{"name":"encoder_tile_size"},"link":null},{"localized_name":"decoder_tile_size","name":"decoder_tile_size","type":"INT","widget":{"name":"decoder_tile_size"},"link":null},{"localized_name":"encoder_dtype","name":"encoder_dtype","type":"COMBO","widget":{"name":"encoder_dtype"},"link":null}],"outputs":[{"localized_name":"SUPIR_VAE","name":"SUPIR_VAE","type":"SUPIRVAE","slot_index":0,"links":[15]},{"localized_name":"denoised_image","name":"denoised_image","type":"IMAGE","slot_index":1,"links":[16]},{"localized_name":"denoised_latents","name":"denoised_latents","type":"LATENT","slot_index":2,"links":[20]}],"properties":{"cnr_id":"comfyui-supir","ver":"53fc4f82f139e0875e1f4f3716fbeafa073e4242","Node name for S&R":"SUPIR_first_stage"},"widgets_values":[true,512,768,"auto"]},{"id":2,"type":"LoadImage","pos":[-593.652099609375,114.81692504882812],"size":[441.6546630859375,571.2802734375],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[28,33,48]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"LoadImage"},"widgets_values":["low-res-72dpi.jpg","image"]},{"id":15,"type":"SetNode","pos":[-403.2860107421875,738.4051513671875],"size":[210,58],"flags":{"collapsed":false},"order":8,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":28}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_InputImage","properties":{"previousName":"InputImage"},"widgets_values":["InputImage"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":17,"type":"SetNode","pos":[386,-36],"size":[210,58],"flags":{"collapsed":true},"order":13,"mode":0,"inputs":[{"name":"SUPIRVAE","type":"SUPIRVAE","link":45}],"outputs":[{"name":"SUPIRVAE","type":"SUPIRVAE","links":[46]}],"title":"Set_SUPIRVAE","properties":{"previousName":"SUPIRVAE"},"widgets_values":["SUPIRVAE"]},{"id":106,"type":"GetImageSize","pos":[-41.692344665527344,574.7759399414062],"size":[210,136],"flags":{"collapsed":true},"order":11,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":50}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[51]},{"localized_name":"height","name":"height","type":"INT","links":[52]},{"localized_name":"batch_size","name":"batch_size","type":"INT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.40","Node name for S&R":"GetImageSize"},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":105,"type":"ImageScaleBy","pos":[-97.50369262695312,427.1586608886719],"size":[270,82],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":48},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"scale_by","name":"scale_by","type":"FLOAT","widget":{"name":"scale_by"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[49,50]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.40","Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",3.0000000000000004],"color":"#2a363b","bgcolor":"#3f5159"},{"id":13,"type":"ImageResize+","pos":[197.06036376953125,427.1586608886719],"size":[315,218],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":49},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":51},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":52},{"localized_name":"interpolation","name":"interpolation","type":"COMBO","widget":{"name":"interpolation"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null},{"localized_name":"condition","name":"condition","type":"COMBO","widget":{"name":"condition"},"link":null},{"localized_name":"multiple_of","name":"multiple_of","type":"INT","widget":{"name":"multiple_of"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[47]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"76e9d1e4399bd025ce8b12c290753d58f9f53e93","Node name for S&R":"ImageResize+","aux_id":"kijai/ComfyUI_essentials"},"widgets_values":[500,500,"lanczos","keep proportion","always",16],"color":"#2a363b","bgcolor":"#3f5159"},{"id":102,"type":"Note","pos":[-930.407470703125,-395.5291748046875],"size":[500,180],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"title":"Custom Nodes Required","properties":{},"widgets_values":["📦 Required Custom Nodes:\n- ComfyUI-SUPIR\n- ComfyUI-KJNodes (ColorMatch)\n- rgthree-comfy (ImageComparer)\n- ComfyUI_essentials (Image Resize)\n"],"color":"#432","bgcolor":"#653"},{"id":9,"type":"SUPIR_conditioner","pos":[931.3925170898438,81.58724212646484],"size":[401.7200012207031,200.86000061035156],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"SUPIR_model","name":"SUPIR_model","type":"SUPIRMODEL","link":22},{"localized_name":"latents","name":"latents","type":"LATENT","link":20},{"localized_name":"captions","name":"captions","shape":7,"type":"STRING","link":null},{"localized_name":"positive_prompt","name":"positive_prompt","type":"STRING","widget":{"name":"positive_prompt"},"link":null},{"localized_name":"negative_prompt","name":"negative_prompt","type":"STRING","widget":{"name":"negative_prompt"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"SUPIR_cond_pos","links":[8]},{"localized_name":"negative","name":"negative","type":"SUPIR_cond_neg","slot_index":1,"links":[9]}],"properties":{"cnr_id":"comfyui-supir","ver":"53fc4f82f139e0875e1f4f3716fbeafa073e4242","Node name for S&R":"SUPIR_conditioner"},"widgets_values":["high resolution, ultra detailed, sharp focus, photograph of a camel, clear facial features, well-lit","low resolution, blurry, out of focus, noisy, overexposed, grainy, washed out"],"color":"#232","bgcolor":"#353"},{"id":21,"type":"SUPIR_model_loader_v2","pos":[-64,-137],"size":[412.73406982421875,170],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":35},{"localized_name":"clip","name":"clip","type":"CLIP","link":39},{"localized_name":"vae","name":"vae","type":"VAE","link":40},{"localized_name":"supir_model","name":"supir_model","type":"COMBO","widget":{"name":"supir_model"},"link":null},{"localized_name":"fp8_unet","name":"fp8_unet","type":"BOOLEAN","widget":{"name":"fp8_unet"},"link":null},{"localized_name":"diffusion_dtype","name":"diffusion_dtype","type":"COMBO","widget":{"name":"diffusion_dtype"},"link":null},{"localized_name":"high_vram","name":"high_vram","shape":7,"type":"BOOLEAN","widget":{"name":"high_vram"},"link":null}],"outputs":[{"localized_name":"SUPIR_model","name":"SUPIR_model","type":"SUPIRMODEL","slot_index":0,"links":[44]},{"localized_name":"SUPIR_VAE","name":"SUPIR_VAE","type":"SUPIRVAE","slot_index":1,"links":[45]}],"properties":{"cnr_id":"comfyui-supir","ver":"53fc4f82f139e0875e1f4f3716fbeafa073e4242","Node name for S&R":"SUPIR_model_loader_v2"},"widgets_values":["SUPIR-v0F_fp16.safetensors",false,"auto",false]},{"id":22,"type":"CheckpointLoaderSimple","pos":[-643,-137],"size":[529.3912963867188,98],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[35]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[39]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[40]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["juggernautXL_v9Rdphoto2Lightning.safetensors"]},{"id":100,"type":"Note","pos":[-395.2126159667969,-420.6764831542969],"size":[500,220],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"title":"SUPIR Model Info","properties":{},"widgets_values":["🧠 SUPIR Model Used:\n- File: SUPIR-v0F_fp16.safetensors\n- Download: https://huggingface.co/Kijai/SUPIR_pruned/tree/main\n\n📁 Place in:\nComfyUI/models/checkpoints/\n\nAlso ensure you have:\n- SDXL Model: juggernautXL_v9Rdphoto2Lightning.safetensors\n- Download: https://civitai.com/models/133005?modelVersionId=357609"],"color":"#432","bgcolor":"#653"},{"id":109,"type":"Note","pos":[63.37799072265625,719.0736694335938],"size":[288.51263427734375,91.0450210571289],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Don't set the resolution too high.\nAim for 1MP - 2MP\nThen later upscale with ultimate SD upscaler"],"color":"#432","bgcolor":"#653"},{"id":101,"type":"Note","pos":[1008.1991577148438,-229.0072784423828],"size":[346.183837890625,130.88177490234375],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"title":"Key Settings to Tweak","properties":{},"widgets_values":["🔧 Recommended Tweaks:\n- Steps: 10-30 → Lower if low VRAM\n- CFG Scale start: 2.0 - 3.5\n- CFG Scale end: 1.5 - 2\n- Decoder Tile Size: 768 (reduce to 512 for <12GB VRAM)\n- EDM_s_churn: 1-10 (How many times noise is added)\n- s_noise: 1.003 (How much noise is added each time)"],"color":"#432","bgcolor":"#653"},{"id":7,"type":"SUPIR_sample","pos":[1386,-87],"size":[315,454],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"SUPIR_model","name":"SUPIR_model","type":"SUPIRMODEL","link":23},{"localized_name":"latents","name":"latents","type":"LATENT","link":17},{"localized_name":"positive","name":"positive","type":"SUPIR_cond_pos","link":8},{"localized_name":"negative","name":"negative","type":"SUPIR_cond_neg","link":9},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg_scale_start","name":"cfg_scale_start","type":"FLOAT","widget":{"name":"cfg_scale_start"},"link":null},{"localized_name":"cfg_scale_end","name":"cfg_scale_end","type":"FLOAT","widget":{"name":"cfg_scale_end"},"link":null},{"localized_name":"EDM_s_churn","name":"EDM_s_churn","type":"INT","widget":{"name":"EDM_s_churn"},"link":null},{"localized_name":"s_noise","name":"s_noise","type":"FLOAT","widget":{"name":"s_noise"},"link":null},{"localized_name":"DPMPP_eta","name":"DPMPP_eta","type":"FLOAT","widget":{"name":"DPMPP_eta"},"link":null},{"localized_name":"control_scale_start","name":"control_scale_start","type":"FLOAT","widget":{"name":"control_scale_start"},"link":null},{"localized_name":"control_scale_end","name":"control_scale_end","type":"FLOAT","widget":{"name":"control_scale_end"},"link":null},{"localized_name":"restore_cfg","name":"restore_cfg","type":"FLOAT","widget":{"name":"restore_cfg"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"sampler","name":"sampler","type":"COMBO","widget":{"name":"sampler"},"link":null},{"localized_name":"sampler_tile_size","name":"sampler_tile_size","shape":7,"type":"INT","widget":{"name":"sampler_tile_size"},"link":null},{"localized_name":"sampler_tile_stride","name":"sampler_tile_stride","shape":7,"type":"INT","widget":{"name":"sampler_tile_stride"},"link":null}],"outputs":[{"localized_name":"latent","name":"latent","type":"LATENT","slot_index":0,"links":[12]}],"properties":{"cnr_id":"comfyui-supir","ver":"53fc4f82f139e0875e1f4f3716fbeafa073e4242","Node name for S&R":"SUPIR_sample"},"widgets_values":[174277455657960,"fixed",12,3.0000000000000004,1.5000000000000002,5,1.0030000000000003,1,1,0.9,1,false,"RestoreDPMPP2MSampler",1024,512]}],"links":[[8,9,0,7,2,"SUPIR_cond_pos"],[9,9,1,7,3,"SUPIR_cond_neg"],[12,7,0,10,1,"LATENT"],[15,5,0,11,0,"SUPIRVAE"],[16,5,1,11,1,"IMAGE"],[17,11,0,7,1,"LATENT"],[20,5,2,9,1,"LATENT"],[22,12,0,9,0,"SUPIRMODEL"],[23,12,0,7,0,"SUPIRMODEL"],[26,10,0,14,1,"IMAGE"],[27,14,0,3,0,"IMAGE"],[28,2,0,15,0,"*"],[29,16,0,14,0,"IMAGE"],[32,19,0,10,0,"SUPIRVAE"],[33,2,0,20,0,"IMAGE"],[34,14,0,20,1,"IMAGE"],[35,22,0,21,0,"MODEL"],[39,22,1,21,1,"CLIP"],[40,22,2,21,2,"VAE"],[44,21,0,12,0,"*"],[45,21,1,17,0,"SUPIRVAE"],[46,17,0,5,0,"SUPIRVAE"],[47,13,0,5,1,"IMAGE"],[48,2,0,105,0,"IMAGE"],[49,105,0,13,0,"IMAGE"],[50,105,0,106,0,"IMAGE"],[51,106,0,13,1,"INT"],[52,106,1,13,2,"INT"]],"groups":[{"id":1,"title":"Image Scaling","bounding":[-107.50369262695312,353.55865478515625,629.5640869140625,301.60003662109375],"color":"#8AA","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.1918176537727971,"offset":[-71.41952871334195,463.9095886960537]},"frontendVersion":"1.16.7","reroutes":[{"id":3,"parentId":4,"pos":[367.01873779296875,194.45169067382812],"linkIds":[47]},{"id":4,"pos":[431.2581481933594,474.8347473144531],"linkIds":[47]}],"VHS_latentpreview":true,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"linkExtensions":[{"id":47,"parentId":3}]},"version":0.4}